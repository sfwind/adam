<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
        "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Avatar">

	<typeAlias alias="avatar"
		type="com.dianping.ba.es.qyweixin.adapter.biz.entity.avatar.Avatar" />

	<resultMap id="avatarResult" class="avatar">
		<result column="Id" property="id" />
		<result column="UserId" property="userId" />
		<result column="Avatar" property="avatar" />
		<result column="AddTime" property="addTime" />
		<result column="UpdateTime" property="updateTime" />
	</resultMap>

	<select id="queryByUserId" resultMap="avatarResult">
		SELECT
        <![CDATA[
            `Id`,
            `UserId`,
            `Avatar`,
            `AddTime`,
            `UpdateTime`
        FROM WeiXin_Avatar
        ]]>
		WHERE `UserId` = #userId#
	</select>

	<insert id="insert">
		INSERT INTO WeiXin_Avatar(
		`UserId`,
		`Avatar`,
		`AddTime`,
		`UpdateTime`
		) VALUES (
		#avatar.userId#,
		#avatar.avatar#,
		NOW(),
		NOW()
		)
	</insert>

	<update id="update">
		UPDATE WeiXin_Avatar SET
        <![CDATA[
        `Avatar` = #avatar.avatar#,
        `UpdateTime` = NOW()
        WHERE `UserId` = #avatar.userId#
        ]]>

	</update>


</sqlMap>